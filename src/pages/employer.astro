---
import PortalLayout from '../layouts/PortalLayout.astro';
import account from '../data/employerAccount.json';
import CTAStrip from '../components/cms/CTAStrip.astro';
import AnnouncementBanner from '../components/cms/AnnouncementBanner.astro';
import ResourceDownload from '../components/cms/ResourceDownload.astro';
import SpotlightCard from '../components/cms/SpotlightCard.astro';
import StatCard from '../components/data/StatCard.astro';
import EnrollmentTable from '../components/data/EnrollmentTable.astro';
import ClaimsUtilization from '../components/data/ClaimsUtilization.astro';

const utilizationItems = [
  { label: 'Life Claims',       count: 2,  amount: '$420,000', pct: 85 },
  { label: 'Critical Illness',  count: 5,  amount: '$180,000', pct: 62 },
  { label: 'Accident Claims',   count: 18, amount: '$44,200',  pct: 38 },
  { label: 'Hospital Claims',   count: 11, amount: '$28,600',  pct: 28 },
];
---


<PortalLayout title="Employer Dashboard" persona="employer">

  <div class="page-header">
    <h1>{account.company}</h1>
    <p>Your benefits account overview. Data sourced from Trustmark SQL Server and Salesforce.</p>
  </div>

  <div class="page-grid">

    <CTAStrip
      message="<strong>Open enrollment closes May 15</strong> â€” remind your employees to review coverage and enroll before the deadline."
      primaryCtaLabel="Start Enrollment"
      primaryCtaUrl="#"
      secondaryCtaLabel="View Enrollment Guide"
      secondaryCtaUrl="#"
      source="Optimizely â€” Campaign Management Â· Active until May 15"
    />

    <AnnouncementBanner
      tag="Renewal Notice"
      headline="Your Group Renewal is Coming Up â€” Action Required"
      body={`Your current benefit plan renews on ${account.renewalDate}. Schedule a review with your account rep to discuss options.`}
      ctaLabel="Schedule Review â†’"
      ctaUrl="#"
      source="Optimizely â€” Managed by Account Management Team"
    />

    <StatCard
      label="Enrolled Employees"
      value={account.enrolled}
      sub={`${account.enrollmentRate} enrollment rate Â· ${account.waived} waived`}
      sourceIcon="â˜ï¸"
      sourceName="Salesforce"
    />

    <StatCard
      label="Monthly Premium"
      value={account.monthlyPremium}
      sub={`YTD total: ${account.ytdPremium}`}
      sourceIcon="ðŸ—„"
      sourceName="SQL Server"
    />

    <StatCard
      label="Your Account Rep"
      value={account.accountRep}
      sub={`<a href="mailto:${account.repEmail}" style="color:var(--blue); text-decoration:none;">${account.repEmail}</a>`}
      sourceIcon="â˜ï¸"
      sourceName="Salesforce"
    />

    <EnrollmentTable products={account.products} />

    <ClaimsUtilization items={utilizationItems} />

    <ResourceDownload
      tag="Billing Statement"
      title="April 2024 Premium Invoice"
      description="Your monthly group premium statement. Includes itemized premium by product line and enrolled employee count."
      fileType="PDF"
      fileSize="186 KB"
      assetUrl="#"
      updatedAt="Generated April 1, 2024"
      source="Optimizely DAM â€” Billing Team"
    />

    <SpotlightCard
      tag="Renewal Prep"
      title="2024 Renewal Readiness Guide"
      description="Everything you need to prepare for your upcoming group renewal, including census templates."
      source="Optimizely â€” Account Management"
    />

    <SpotlightCard
      tag="Enrollment Tool"
      title="Enroll For Lifeâ„¢ Platform"
      description="Self-service enrollment for permanent life products. Now available for your employee group."
      source="Optimizely â€” Account Management"
    />

    <SpotlightCard
      tag="Compliance"
      title="2024 Compliance Notices"
      description="Required annual notices for group benefit plans. Download and distribute to employees by May 1."
      source="Optimizely â€” Account Management"
    />

  </div>

</PortalLayout>
