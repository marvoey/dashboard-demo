---
import BroadridgeLayout from '../../layouts/BroadridgeLayout.astro';
import PersonalizedHero from '../../components/cms/PersonalizedHero.astro';
import AnnouncementBanner from '../../components/cms/AnnouncementBanner.astro';
import ResourceDownload from '../../components/cms/ResourceDownload.astro';
import SpotlightCard from '../../components/cms/SpotlightCard.astro';
import StatCard from '../../components/data/StatCard.astro';
import Band from '../../components/layout/Band.astro';
import Row from '../../components/layout/Row.astro';
import Col from '../../components/layout/Col.astro';
import PageHeader from '../../components/broadridge/PageHeader.astro';
import DataTable from '../../components/broadridge/DataTable.astro';

const clients = [
  { name: 'Harrison Family Trust',    acct: 'BRG-004821', aum: '$18,240,000', ytd: '+9.2%',  lastReview: 'Apr 10, 2024', status: 'Active'          },
  { name: 'Westfield Pension Plan',   acct: 'BRG-007103', aum: '$34,100,000', ytd: '+6.7%',  lastReview: 'Mar 22, 2024', status: 'Active'          },
  { name: 'Nguyen & Associates LLC',  acct: 'BRG-002940', aum: '$8,750,000',  ytd: '+11.4%', lastReview: 'Apr 15, 2024', status: 'Active'          },
  { name: 'Park Foundation',          acct: 'BRG-009318', aum: '$22,600,000', ytd: '+5.1%',  lastReview: 'Feb 28, 2024', status: 'Review Due'      },
  { name: 'Castillo Retirement IRA',  acct: 'BRG-001877', aum: '$4,320,000',  ytd: '+8.8%',  lastReview: 'Apr 12, 2024', status: 'Active'          },
  { name: 'Oakmont Capital Partners', acct: 'BRG-011204', aum: '$36,790,000', ytd: '+4.3%',  lastReview: 'Jan 15, 2024', status: 'Needs Attention' },
];
---

<BroadridgeLayout title="Advisor Dashboard" persona="advisor">

  <PageHeader
    title="Good morning, Michael ðŸ‘‹"
    description="Your book of business as of today. Data sourced from Broadridge Wealth Management and Portfolio Data Hub."
  />

  <div class="page-grid">

    <Band>
      <Row>
        <Col span="1/3">
          <PersonalizedHero
            eyebrow="Q2 2024 Â· Advisor Portal"
            headline="New model portfolios available for Q2 rebalancing"
            subtext="Broadridge's Model Marketplace has published five new ESG-aligned model portfolios for Q2. Assign to client accounts directly from the portfolio management screen."
            ctaLabel="Browse Model Marketplace"
            ctaUrl="#"
            segment="advisor"
            source="Optimizely â€” Targeted to Advisor Segment"
          />
        </Col>
        <Col span="2/3">
          <AnnouncementBanner
            tag="Platform Update"
            headline="Portfolio Analytics 3.0 Now Available â€” Enhanced Risk Attribution"
            body="The latest release includes factor-based risk attribution, Monte Carlo scenario modeling, and one-click PDF report generation for client reviews."
            ctaLabel="Explore New Features â†’"
            ctaUrl="#"
            source="Optimizely â€” Broadridge Product Team"
          />
        </Col>
      </Row>
    </Band>

    <Band>
      <Row>
        <Col span="1/3">
          <StatCard
            label="Total AUM"
            value="$124.7M"
            sub="+$3.2M vs prior quarter"
            sourceIcon="ðŸ“¡"
            sourceName="Portfolio Data Hub"
          />
        </Col>
        <Col span="1/3">
          <StatCard
            label="Active Clients"
            value="47"
            sub="3 reviews due this month"
            sourceIcon="ðŸ“¡"
            sourceName="Broadridge CRM"
          />
        </Col>
        <Col span="1/3">
          <StatCard
            label="YTD Advisory Fees"
            value="$892,400"
            sub="+18% vs same period last year"
            sourceIcon="ðŸ—„"
            sourceName="Fee Management System"
          />
        </Col>
      </Row>
    </Band>

    <DataTable
      barTitle="Portfolio Data Hub + Broadridge CRM"
      sources={[
        { icon: "ðŸ“¡", name: "Portfolio Data Hub" },
        { icon: "ðŸ—„", name: "Broadridge CRM" },
      ]}
      tableTitle="Top Client Accounts"
      tableSubtitle="Showing 6 of 47 accounts"
    >
      <thead>
        <tr>
          <th>Client Name</th>
          <th>Account #</th>
          <th>AUM</th>
          <th>YTD Return</th>
          <th>Last Review</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {clients.map(c => (
          <tr>
            <td style="font-weight:500;">{c.name}</td>
            <td class="mono">{c.acct}</td>
            <td style="font-weight:600;" data-live>{c.aum}</td>
            <td style={`font-weight:600; color:${c.ytd.startsWith('+') ? 'var(--green)' : 'var(--red)'}`}>{c.ytd}</td>
            <td class="mono">{c.lastReview}</td>
            <td>
              <span class={`status ${
                c.status === 'Active'          ? 'status-active' :
                c.status === 'Review Due'      ? 'status-pending' :
                'status-renewal'
              }`}>{c.status}</span>
            </td>
          </tr>
        ))}
      </tbody>
    </DataTable>

    <ResourceDownload
      tag="Practice Management"
      title="Q2 2024 Advisor Practice Management Guide"
      description="Strategies for growing your book of business, optimizing client communications, and leveraging Broadridge's digital engagement tools."
      fileType="PDF"
      fileSize="2.1 MB"
      assetUrl="#"
      updatedAt="Published April 1, 2024"
      source="Optimizely DAM â€” Broadridge Advisor Solutions"
    />

    <SpotlightCard
      tag="Portfolio Tools"
      title="Portfolio Analytics 3.0"
      description="Factor-based risk attribution, Monte Carlo scenario modeling, and automated client reporting now available."
      source="Optimizely â€” Broadridge Product Marketing"
    />

    <SpotlightCard
      tag="Model Marketplace"
      title="500+ Model Portfolios"
      description="Access curated third-party models and Broadridge's own strategic allocation models for faster rebalancing."
      source="Optimizely â€” Broadridge Product Marketing"
    />

    <SpotlightCard
      tag="Client Engagement"
      title="Digital Client Portal"
      description="Give clients 24/7 access to account performance, documents, and secure messaging â€” branded to your practice."
      source="Optimizely â€” Broadridge Product Marketing"
    />

  </div>

</BroadridgeLayout>
